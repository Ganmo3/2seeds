<div class="d-flex align-items-center justify-content-between mt-5">
  <button id="preview-button" type="button" class="preview-btn">Preview</button>
    <div id="link-message" class="link-message">リンクを入れてください。</div>
  <div class="form-group_button-wrapper d-flex align-items-center">
    <div class="toggle_switch mr-3">
      <input type="checkbox" id="postTypeToggle" class="toggle_input">
      <label for="postTypeToggle" class="toggle_label"></label>
    </div>
    <div class="btn-group" role="group">
  <% if @post.persisted? %>
    <% if @post.published? %>
      <% if @post.draft? %>
        <%= f.submit '公開する', id: 'publishButton', name: 'published', class: "publish-btn" %>
        <%= f.submit '更新する', id: 'updateButton', name: 'update', class: "submit-btn" %>
      <% else %>
        <%= f.submit '非公開にする', id: 'unpublishButton', name: 'unpublished', class: "unpublish-btn" %>
        <%= f.submit '更新する', id: 'updateButton', name: 'update', class: "submit-btn" %>
      <% end %>
    <% else %>
      <%= f.submit '非公開にする', id: 'unpublishButton', name: 'unpublished', class: "unpublish-btn" %>
      <%= f.submit '更新する', id: 'updateButton', name: 'update', class: "submit-btn" %>
    <% end %>
  <% else %>
    <%= f.submit '公開する', id: 'postButton', name: 'post', class: "submit-btn" %>
    <%= f.submit '下書き保存', id: 'draftButton', name: 'draft', class: "draft-btn" %>
  <% end %>
    </div>
  </div>
</div>


<div class="form-group form-group_link mt-4">
  <%= f.label :link, "YouTube Link", class: "form-label" %>
  <%= f.text_field :link, required: true, class: 'form-control post_link' %>
</div>

<div class="form-group form-group_tags">
  <%= f.label :tag_list, "Tags", class: "form-label" %>
  <%= f.text_field :tag_list, class: "form-control", data: { role: "tagsinput" } %>
</div>

<div class="form-group form-group_title">
  <%= f.label :title, "Title", class: "form-label" %>
  <%= f.text_field :title, required: true, class: 'form-control post_title' %>
</div>

<div class="form-group form-group_body">
  <%= f.label :content, "Content", class: "form-label" %>
  <%= f.rich_text_area :content, required: true %>
</div>

<!-- プレビューのモーダルウィンドウ -->
<div id="preview-modal" class="modal">
  <div class="modal-content"></div>
</div>

<script>
  $(document).ready(function() {
    $('#preview-button').click(function() {
      var formData = {
        link: $('#post_link').val(),
        tag_list: $('#post_tag_list').val(),
        title: $('#post_title').val(),
        body: $('#post_content').val()
        // 他のフォームフィールドも同様に追加
      };

      $.ajax({
        url: '<%= preview_posts_path %>',
        type: 'POST',
        data: { post: formData },
        success: function(response) {
          $('#preview-modal .modal-content').html(response);
          $('#preview-modal').addClass('fade-in').show();
        }
      });
    });

    $('#preview-modal').on('click', function() {
      $(this).addClass('fade-out');
      setTimeout(() => {
        $(this).hide().removeClass('fade-out');
      }, 300); // アニメーションの時間に合わせて調整
    });

/*
    $('#postTypeToggle').change(function() {
       var isChecked = $(this).is(':checked');
      var isDraft = $('#draftButton').is(':visible');
      var isPublished = $('#publishButton').is(':visible');

      if (isChecked) {
        if (isPublished) {
          $('#unpublishButton').hide();
          $('#updateButton').prop('disabled', false).show();
          $('#publishButton').prop('disabled', true).hide();
          $('#postButton').hide();
          $('#draftButton').hide();
        } else if (isDraft) {
          $('#unpublishButton').show();
          $('#updateButton').prop('disabled', true).show();
          $('#publishButton').prop('disabled', true).hide();
          $('#postButton').hide();
          $('#draftButton').hide();
        }
      } else {
        $('#unpublishButton').hide();
        $('#updateButton').prop('disabled', true).show();
        $('#publishButton').prop('disabled', true).hide();

        if (isPublished) {
          $('#postButton').hide();
          $('#draftButton').hide();
        } else if (isDraft) {
          $('#postButton').show();
          $('#draftButton').show();
        }
      }
    });

    // 初期表示時の設定
    $('#postTypeToggle').change(); // 初期表示時にchangeイベントをトリガーする
*/
  });
</script>